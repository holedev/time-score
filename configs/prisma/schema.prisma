// https://supabase.com/partners/integrations/prisma

// NOTE: 
// I do not use database of Supabase, I use my own database with prisma to save data locally.
// I only use Supabase for authentication. You can use Supabase for database as well. 

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum TeamStatus {
  PENDING
  DONE
}

model Event {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  title       String
  description String
  duration    Int
  timeStart   DateTime
  timeEnd     DateTime

  reviewers User[]
  teams     Team[]
}

model Team {
  id          Int        @id @default(autoincrement())
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  title       String
  description String
  image       String
  members     String[]
  order       Int
  status      TeamStatus @default(PENDING)
  Event       Event?     @relation(fields: [eventId], references: [id])
  eventId     Int?
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  userId    String
  Event     Event?   @relation(fields: [eventId], references: [id])
  eventId   Int?
}
